<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Something | 风继续吹]]></title>
  <link href="http://bigday.github.io/blog/categories/something/atom.xml" rel="self"/>
  <link href="http://bigday.github.io/"/>
  <updated>2014-09-27T14:17:32+08:00</updated>
  <id>http://bigday.github.io/</id>
  <author>
    <name><![CDATA[adansonia]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[New Test]]></title>
    <link href="http://bigday.github.io/blog/2014/09/27/new-test/"/>
    <updated>2014-09-27T14:09:10+08:00</updated>
    <id>http://bigday.github.io/blog/2014/09/27/new-test</id>
    <content type="html"><![CDATA[<p>ios应用崩溃的时候，SDK提供了一个NSSetUncaughtExceptionHandler来处理异常。</p>

<p><code>NSSetUncaughtExceptionHandler(handleRootException);</code></p>

<p>绑定到<code>handleRootException</code>中让其函数来处理异常。</p>

<pre><code class="objc">static void handleRootException( NSException* exception )
{
    NSString* name = [ exception name ];
    NSString* reason = [ exception reason ];
    NSArray* symbols = [ exception callStackSymbols ];
    NSMutableString* strSymbols = [ [ NSMutableString alloc ] init ];
    for ( NSString* item in symbols )
    {
        [ strSymbols appendString: item ];
        [ strSymbols appendString: @"\r\n" ];
    }

    NSString*   errorInfo = [NSString stringWithFormat:@" *** Terminating app due to uncaught exception %@ , reason: %@  \r\n  *** First throw call stack: \r\n(\r\n  %@\r\n)", name, reason, strSymbols];

    logToFile(errorInfo);

}
</code></pre>

<p>这个函数将崩溃的信息转入字符串之后存入文件中。</p>

<p>我封装了其中的方法，写了一个崩溃报告收集的接口。只需在应用开始时调用即可。</p>

<p>会将崩溃文件按时间保存在文件夹中，当应用每次启动的时候上传到服务器之后便删除（网络连接的自行加入）。</p>
]]></content>
  </entry>
  
</feed>
