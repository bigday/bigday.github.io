<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[风继续吹]]></title>
  <link href="http://bigday.github.io/atom.xml" rel="self"/>
  <link href="http://bigday.github.io/"/>
  <updated>2014-09-27T14:17:32+08:00</updated>
  <id>http://bigday.github.io/</id>
  <author>
    <name><![CDATA[adansonia]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[new test]]></title>
    <link href="http://bigday.github.io/blog/2014/09/27/new-test/"/>
    <updated>2014-09-27T14:09:10+08:00</updated>
    <id>http://bigday.github.io/blog/2014/09/27/new-test</id>
    <content type="html"><![CDATA[<p>ios应用崩溃的时候，SDK提供了一个NSSetUncaughtExceptionHandler来处理异常。</p>

<p><code>NSSetUncaughtExceptionHandler(handleRootException);</code></p>

<p>绑定到<code>handleRootException</code>中让其函数来处理异常。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">static</span> <span class="kt">void</span> <span class="nf">handleRootException</span><span class="p">(</span> <span class="bp">NSException</span><span class="o">*</span> <span class="n">exception</span> <span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="bp">NSString</span><span class="o">*</span> <span class="n">name</span> <span class="o">=</span> <span class="p">[</span> <span class="n">exception</span> <span class="n">name</span> <span class="p">];</span>
</span><span class='line'>    <span class="bp">NSString</span><span class="o">*</span> <span class="n">reason</span> <span class="o">=</span> <span class="p">[</span> <span class="n">exception</span> <span class="n">reason</span> <span class="p">];</span>
</span><span class='line'>    <span class="bp">NSArray</span><span class="o">*</span> <span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span> <span class="n">exception</span> <span class="n">callStackSymbols</span> <span class="p">];</span>
</span><span class='line'>    <span class="bp">NSMutableString</span><span class="o">*</span> <span class="n">strSymbols</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span> <span class="bp">NSMutableString</span> <span class="n">alloc</span> <span class="p">]</span> <span class="n">init</span> <span class="p">];</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span> <span class="bp">NSString</span><span class="o">*</span> <span class="n">item</span> <span class="k">in</span> <span class="n">symbols</span> <span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="p">[</span> <span class="n">strSymbols</span> <span class="nl">appendString</span><span class="p">:</span> <span class="n">item</span> <span class="p">];</span>
</span><span class='line'>        <span class="p">[</span> <span class="n">strSymbols</span> <span class="nl">appendString</span><span class="p">:</span> <span class="s">@&quot;</span><span class="se">\r\n</span><span class="s">&quot;</span> <span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="bp">NSString</span><span class="o">*</span>   <span class="n">errorInfo</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@&quot; *** Terminating app due to uncaught exception %@ , reason: %@  </span><span class="se">\r\n</span><span class="s">  *** First throw call stack: </span><span class="se">\r\n</span><span class="s">(</span><span class="se">\r\n</span><span class="s">  %@</span><span class="se">\r\n</span><span class="s">)&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">strSymbols</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">logToFile</span><span class="p">(</span><span class="n">errorInfo</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>这个函数将崩溃的信息转入字符串之后存入文件中。</p>

<p>我封装了其中的方法，写了一个崩溃报告收集的接口。只需在应用开始时调用即可。</p>

<p>会将崩溃文件按时间保存在文件夹中，当应用每次启动的时候上传到服务器之后便删除（网络连接的自行加入）。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Test]]></title>
    <link href="http://bigday.github.io/blog/2014/09/27/test/"/>
    <updated>2014-09-27T00:00:00+08:00</updated>
    <id>http://bigday.github.io/blog/2014/09/27/test</id>
    <content type="html"><![CDATA[<p>第一梯队</p>

<table>
<thead>
<tr>
<th>时间 </th>
<th> 地点</th>
</tr>
</thead>
<tbody>
<tr>
<td>220 </td>
<td> 曹操扑街</td>
</tr>
<tr>
<td>681 </td>
<td> 大唐了吧</td>
</tr>
<tr>
<td>1200 </td>
<td> 宋</td>
</tr>
<tr>
<td>1500 </td>
<td> 元</td>
</tr>
<tr>
<td>不要纠结对错</td>
<td></td>
</tr>
</tbody>
</table>


<hr />

<p>layout: post
title: &ldquo;Test&rdquo;
date: 2014-09-27 12:30:51 +0800
comments: true</p>

<h2>categories: </h2>
]]></content>
  </entry>
  
</feed>
